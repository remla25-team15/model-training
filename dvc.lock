schema: '2.0'
stages:
  get_data:
    cmd: python src/get_data.py --output_dir datasets
    deps:
    - path: src/get_data.py
      hash: md5
      md5: 43d80c25a4ba3bf231cafc27b586c240
      size: 1964
    outs:
    - path: datasets/
      hash: md5
      md5: 706d6ab9d8fddff5a47d00b0f65208b8.dir
      size: 61190
      nfiles: 2
  preprocess:
    cmd: python src/prepare_data.py --output_dir data/ --dataset datasets/a1_RestaurantReviews_HistoricDump.tsv
      --bow_dir output/
    deps:
    - path: src/prepare_data.py
      hash: md5
      md5: c30b6404097559ace17da2407dcf1456
      size: 1517
    outs:
    - path: data/X.npy
      hash: md5
      md5: f10f362d41996fd6bc87cb2b8780be29
      size: 10231328
    - path: data/y.npy
      hash: md5
      md5: b80a2d74a94a02652bf37dcc4a2bba6d
      size: 7328
    - path: output/c1_BoW_Sentiment_Model.pkl
      hash: md5
      md5: 33adaa0357272ac9fcba66c72c39f889
      size: 34038
  train_model:
    cmd: python src/train.py --data data/X.npy --labels data/y.npy --output output/
      --split_output_dir data/split --train_metrics_output metrics/train.json
    deps:
    - path: data/X.npy
      hash: md5
      md5: f10f362d41996fd6bc87cb2b8780be29
      size: 10231328
    - path: data/y.npy
      hash: md5
      md5: b80a2d74a94a02652bf37dcc4a2bba6d
      size: 7328
    - path: params.yaml
      hash: md5
      md5: 4afd735d900edd82c44e18160f729e36
      size: 209
    - path: src/train.py
      hash: md5
      md5: 7dce77d1f6364e46d3ce89d9fa68b3f5
      size: 3107
    params:
      params.yaml:
        train.priors:
        train.random_state: 45
        train.test_size: 0.2
        train.train_all: false
        train.var_smoothing: 1e-07
    outs:
    - path: data/split/X_test.npy
      hash: md5
      md5: fb799880e99c2a9387c6579697e3eab9
      size: 2046368
    - path: data/split/y_test.npy
      hash: md5
      md5: ffff2dee900c1b578db40ddfcb531002
      size: 1568
    - path: metrics/train.json
      hash: md5
      md5: fe454256564430f4f589e435bb46f15f
      size: 44
    - path: output/c2_Classifier_Sentiment_Model.pkl
      hash: md5
      md5: b06be03960c0bdd2d3db53318bd676d7
      size: 46247
  evaluate:
    cmd: python src/evaluate.py --X_test data/split/X_test.npy --y_test data/split/y_test.npy
      --model output/c2_Classifier_Sentiment_Model.pkl --metrics_output metrics/eval.json
    deps:
    - path: data/split/X_test.npy
      hash: md5
      md5: fb799880e99c2a9387c6579697e3eab9
      size: 2046368
    - path: data/split/y_test.npy
      hash: md5
      md5: ffff2dee900c1b578db40ddfcb531002
      size: 1568
    - path: output/c2_Classifier_Sentiment_Model.pkl
      hash: md5
      md5: b06be03960c0bdd2d3db53318bd676d7
      size: 46247
    - path: src/evaluate.py
      hash: md5
      md5: 6310dbd2846d7fb62d1c85f2a5229f75
      size: 1566
    outs:
    - path: metrics/eval.json
      hash: md5
      md5: 6d310bed7076352c61e955758b053623
      size: 243
